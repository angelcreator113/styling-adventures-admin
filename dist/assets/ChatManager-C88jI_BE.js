import{r as a,q as b,a as v,c as u,o as N,j as t,b as s,e as k,f as C,h,s as i,d,i as w}from"./index-Dpurs1Jy.js";function D(){const[n,m]=a.useState([]),[l,r]=a.useState(""),[c,p]=a.useState("style talk");a.useEffect(()=>{const e=b(u(s,"threads"),v("lastActivityAt","desc"),limit(maxThreads));return N(e,j=>m(j.docs.map(o=>({id:o.id,...o.data()}))))},[]);async function f(e){e.preventDefault(),l.trim()&&(await k(u(s,"forum/threads"),{title:l.trim(),tag:c,excerpt:"New topic ðŸ‘€",createdAt:i(),lastActivityAt:i(),replyCount:0,locked:!1,createdBy:C.currentUser?.uid||null}),r(""))}async function x(e){await h(d(s,"forum/threads",e.id),{locked:!e.locked,updatedAt:i()})}async function y(e){await h(d(s,"forum/threads",e.id),{featured:!0,featuredAt:i()})}async function g(e){confirm("Delete this thread?")&&await w(d(s,"forum/threads",e.id))}return t.jsx("section",{className:"container",style:{padding:16},children:t.jsx("div",{className:"dashboard-card",children:t.jsxs("div",{className:"card__body",children:[t.jsx("h2",{className:"card__title",children:"Bestie Chat â€” Admin"}),t.jsxs("form",{onSubmit:f,className:"row",style:{display:"flex",gap:8,marginBottom:12},children:[t.jsx("input",{value:l,onChange:e=>r(e.target.value),placeholder:"New thread titleâ€¦"}),t.jsxs("select",{value:c,onChange:e=>p(e.target.value),children:[t.jsx("option",{children:"style talk"}),t.jsx("option",{children:"shopping finds"}),t.jsx("option",{children:"events"}),t.jsx("option",{children:"help me style"})]}),t.jsx("button",{className:"tb-btn primary",type:"submit",children:"Create"})]}),t.jsxs("div",{className:"dashboard-grid",style:{gridTemplateColumns:"1fr"},children:[n.map(e=>t.jsxs("div",{className:"dashboard-card",style:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:10},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:700},children:e.title}),t.jsxs("div",{className:"muted sm",children:[e.tag," â€¢ ",e.replyCount||0," replies ",e.locked?"â€¢ locked":""]})]}),t.jsxs("div",{className:"row",style:{display:"inline-flex",gap:6},children:[t.jsx("button",{className:"tb-btn",onClick:()=>x(e),children:e.locked?"Unlock":"Lock"}),t.jsx("button",{className:"tb-btn",onClick:()=>y(e),children:"Feature"}),t.jsx("button",{className:"tb-btn danger",onClick:()=>g(e),children:"Delete"})]})]},e.id)),n.length===0&&t.jsx("div",{className:"empty",children:"No threads yet."})]})]})})})}export{D as default};
