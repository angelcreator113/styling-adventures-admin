import{r as m,j as e,O as j,V as i}from"./index-Dpurs1Jy.js";import{g as v,h as b}from"./index.esm-Cclw387c.js";function N(){const[h,c]=m.useState(""),[l,d]=m.useState("fan"),[p,u]=m.useState(""),a=(s,r)=>s==="error"?i.error(r):i.success(r),f=async s=>{s.preventDefault();const r=h.trim().toLowerCase();if(!r||!/\S+@\S+\.\S+/.test(r))return a("error","Enter a valid email address.");const n={email:r,role:l};if(l==="creator"&&p!==""){const t=Number(p);if(!Number.isFinite(t)||t<0)return a("error","Spaces cap must be a non-negative number.");n.spacesCap=t}try{const t=v(),g=b(t,"setUserRole")(n);i.loading("Updating role…",{id:"role"});const x=await g;i.dismiss("role"),x?.data?.ok?(a("success",`Updated: ${r} → ${l}${n.spacesCap!=null?` (spaces: ${n.spacesCap})`:""}`),c(""),u(""),d("fan")):a("error","Something went wrong.")}catch(t){i.dismiss("role");const o=t?.message||String(t);o.includes("unauthorized")?a("error","You don’t have permission to do that."):o.includes("user-not-found")?a("error","User not found. Create the account first."):o.includes("invalid-args")?a("error","Invalid inputs."):a("error","Failed to update role.")}};return e.jsxs("section",{className:"container",style:{padding:16},children:[e.jsx(j,{position:"top-right"}),e.jsxs("div",{className:"dashboard-card",style:{padding:16},children:[e.jsx("h1",{className:"page-title",style:{marginTop:0},children:"Manage Users (Roles)"}),e.jsx("p",{className:"muted",style:{marginTop:4},children:"Admins only. Set a user’s role and optionally a spaces cap for creators."}),e.jsxs("form",{onSubmit:f,style:{display:"grid",gap:12,marginTop:12,maxWidth:560},children:[e.jsxs("div",{children:[e.jsx("label",{className:"input__label",htmlFor:"user-email",children:"User email"}),e.jsx("input",{id:"user-email",type:"email",className:"input__field",placeholder:"user@example.com",value:h,onChange:s=>c(s.target.value),required:!0,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"input__label",htmlFor:"user-role",children:"Role"}),e.jsxs("select",{id:"user-role",className:"select",value:l,onChange:s=>d(s.target.value),children:[e.jsx("option",{value:"fan",children:"Fan"}),e.jsx("option",{value:"creator",children:"Creator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx("div",{className:"muted",style:{marginTop:6},children:"Admins have full access. Creators can access Creator Studio."})]}),l==="creator"&&e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsx("label",{className:"input__label",htmlFor:"spaces-cap",children:"Spaces Cap (optional)"}),e.jsx("input",{id:"spaces-cap",type:"number",min:0,className:"input__field",placeholder:"e.g. 2",value:p,onChange:s=>u(s.target.value)}),e.jsxs("div",{className:"muted",children:["Leave blank for default. This number is stored at",e.jsx("code",{children:" users/<uid>/settings/profile.spacesCap"}),"."]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn primary",type:"submit",children:"Save"}),e.jsx("button",{className:"btn",type:"button",onClick:()=>{c(""),u(""),d("fan")},children:"Reset"})]})]})]})]})}export{N as default};
