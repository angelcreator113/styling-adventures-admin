import{u as g,r as d,d as j,g as N,c as u,o as b,q as v,a as T,j as e,L as S,b as n,e as B,f as m,s as P}from"./index-Dpurs1Jy.js";function D(){const{id:t}=g(),[r,p]=d.useState(null),[c,h]=d.useState([]),[i,o]=d.useState("");d.useEffect(()=>{if(!t)return;const s=j(n,"forum/threads",t);N(s).then(a=>a.exists()&&p({id:a.id,...a.data()}));const f=u(n,"forum/threads",t,"posts"),y=b(v(f,T("createdAt","asc")),a=>h(a.docs.map(l=>({id:l.id,...l.data()}))));return()=>y()},[t]);async function x(s){s.preventDefault(),i.trim()&&(await B(u(n,"forum/threads",t,"posts"),{uid:m.currentUser?.uid||null,displayName:m.currentUser?.displayName||"Bestie",text:i.trim(),createdAt:P()}),o(""))}return r?e.jsx("section",{className:"container",style:{padding:16},children:e.jsxs("div",{className:"dashboard-card",style:{padding:16},children:[e.jsx(S,{to:"/community/forum",className:"muted",children:"← Back to forum"}),e.jsx("h1",{style:{marginTop:8},children:r.title}),r.excerpt?e.jsx("p",{className:"muted",children:r.excerpt}):null,e.jsxs("div",{style:{marginTop:12,display:"grid",gap:8},children:[c.map(s=>e.jsxs("article",{className:"dashboard-card",style:{padding:12},children:[e.jsx("div",{style:{fontWeight:600},children:s.displayName||"Bestie"}),e.jsx("p",{style:{margin:"6px 0 0"},children:s.text})]},s.id)),c.length===0&&e.jsx("p",{className:"muted",children:"No replies yet — be the first!"})]}),e.jsxs("form",{onSubmit:x,style:{display:"grid",gap:8,marginTop:12},children:[e.jsx("textarea",{rows:3,placeholder:"Add your thoughts…",value:i,onChange:s=>o(s.target.value)}),e.jsx("button",{className:"btn primary",type:"submit",children:"Post reply"})]})]})}):e.jsx("section",{className:"container",style:{padding:16},children:e.jsx("div",{className:"dashboard-card",children:"Loading…"})})}export{D as default};
