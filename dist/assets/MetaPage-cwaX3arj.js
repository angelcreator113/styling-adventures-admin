import{r as b,j as s,W as d,X as u,Y as p,f as y,s as g,e as h,c as x,b as f}from"./index-Dpurs1Jy.js";const e=t=>document.getElementById(t)?.value?.trim()||"",a=t=>!!document.getElementById(t)?.checked;function v(){return b.useEffect(()=>{const t=async m=>{const i=m.detail||{},r=i.uiPrefix;if(!r||i._metaPersisted)return;const o=y.currentUser;if(!o)return;const n={"closet-":{path:`users/${o.uid}/closet`,fields:()=>({title:e("closet-title"),notes:e("closet-notes"),category:e("closet-category"),subcategory:e("closet-subcategory"),subsubcategory:e("closet-subsubcategory"),visibility:a("closet-is-public")?"public":"private"})},"voice-":{path:`users/${o.uid}/voice`,fields:()=>({title:e("voice-title"),notes:e("voice-notes"),category:e("voice-category"),subcategory:e("voice-subcategory"),subsubcategory:e("voice-subsubcategory"),visibility:a("voice-is-public")?"public":"private"})},"episode-":{path:`users/${o.uid}/episodes`,fields:()=>({title:e("episode-title")||e("episodes-title"),notes:e("episode-notes")||e("episodes-notes"),category:e("episode-category")||e("episodes-category"),subcategory:e("episode-subcategory")||e("episodes-subcategory"),subsubcategory:e("episode-subsubcategory")||e("episodes-subsubcategory"),visibility:a("episode-is-public")?"public":"private"})},"episodes-":{path:`users/${o.uid}/episodes`,fields:()=>({title:e("episodes-title")||e("episode-title"),notes:e("episodes-notes")||e("episode-notes"),category:e("episodes-category")||e("episode-category"),subcategory:e("episodes-subcategory")||e("episode-subcategory"),subsubcategory:e("episodes-subsubcategory")||e("episode-subsubcategory"),visibility:a("episode-is-public")?"public":"private"})}},c=n[r]||(r.startsWith("episode")?n["episode-"]:null);if(c)try{const l={uid:o.uid,...c.fields(),fileName:i.fileName||"",url:i.url||"",storagePath:i.path||"",uploadedAt:g()};await h(x(f,c.path),l),i._metaPersisted=!0}catch(l){console.error("[AppShell] failed to save upload metadata:",l)}};return document.addEventListener("upload:complete",t),()=>document.removeEventListener("upload:complete",t)},[]),s.jsxs("div",{className:"app-shell",children:[s.jsx(d,{}),s.jsx("main",{id:"main-content",className:"app-main",role:"main","aria-live":"polite",children:s.jsx(u,{children:s.jsx(p,{})})})]})}function j(){return s.jsxs(s.Fragment,{children:[s.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to content"}),s.jsx(d,{}),s.jsxs("div",{className:"app-shell",children:[s.jsx("aside",{id:"sidebar",className:"sidebar"}),s.jsx("main",{id:"main-content",className:"container",role:"main",children:s.jsx(u,{children:s.jsx(p,{})})})]})]})}function N(){return s.jsx(j,{children:s.jsxs("section",{id:"meta-panel",className:"panel panel-card flex-1 minw-300 bg-white rounded-lg p-2rem shadow-sm",children:[s.jsx("h2",{className:"text-purple-dark mb-2rem",children:"Meta Information"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"You can add metadata here for tracking, search, or localization purposes."}),s.jsx("form",{className:"flex-col gap-1rem"})]})})}function k(){return s.jsx(v,{children:s.jsx(N,{})})}export{k as default};
